import React, { useState, useEffect } from 'react';

// –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è API
const apiKey = ""; // –ö–ª—é—á –ø–æ–¥—Å—Ç–∞–≤–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

const slides = [
{
id: 1,
type: "title",
title: "–ë–∏–∑–Ω–µ—Å –Ω–∞ –ê–≤—Ç–æ–ø–∏–ª–æ—Ç–µ",
subtitle: "LukInterLab Business OS",
content: "–ü–µ—Ä–≤–∞—è –≤ –º–∏—Ä–µ –û–°, –≥–¥–µ —Ä—É—Ç–∏–Ω–æ–π —É–ø—Ä–∞–≤–ª—è–µ—Ç –ò–ò.",
icon: "üöÄ"
},
{
id: 2,
type: "pain",
title: "–ü–æ—á–µ–º—É –±–∏–∑–Ω–µ—Å —É–º–∏—Ä–∞–µ—Ç?",
points: [
{ icon: "üå™Ô∏è", title: "–•–∞–æ—Å", desc: "–î–∞–Ω–Ω—ã–µ –≤ 10 –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä–∞—Ö." },
{ icon: "üëî", title: "–ú–∏–∫—Ä–æ–º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç", desc: "80% –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞ –∫–æ–Ω—Ç—Ä–æ–ª—å." },
{ icon: "üìâ", title: "–°–ª–µ–ø–æ—Ç–∞", desc: "–ö–∞—Å—Å–æ–≤—ã–µ —Ä–∞–∑—Ä—ã–≤—ã –ø–æ—Å—Ç—Ñ–∞–∫—Ç—É–º." }
]
},
{
id: 3,
type: "solution",
title: "LukInterLab OS",
subtitle: "–¶–∏—Ñ—Ä–æ–≤–æ–π –ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –î–∏—Ä–µ–∫—Ç–æ—Ä",
content: "–ï–¥–∏–Ω–∞—è —ç–∫–æ—Å–∏—Å—Ç–µ–º–∞ —Å –ò–ò-–ê–≥–µ–Ω—Ç –≤ —Ü–µ–Ω—Ç—Ä–µ.",
highlight: "–î–µ–π—Å—Ç–≤—É–µ—Ç –Ω–∞ –æ–ø–µ—Ä–µ–∂–µ–Ω–∏–µ 24/7.",
icon: "ü§ñ"
},
{
id: 4,
type: "tech",
title: "–ì–∏–±—Ä–∏–¥–Ω—ã–π –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç",
subtitle: "–ù–µ–π—Ä–æ-–ü–∞—Ä—Å–µ—Ä –ö–æ–º–∞–Ω–¥",
schema: [
{ part: "–ì–õ–ê–ó–ê", desc: "OCR / –ó—Ä–µ–Ω–∏–µ", icon: "üëÅÔ∏è" },
{ part: "–ú–û–ó–ì", desc: "Gemini / LLM", icon: "üß†" },
{ part: "–†–£–ö–ò", desc: "API / –ë–∞–Ω–∫–∏", icon: "ü¶æ" }
]
},
{
id: 5,
type: "case",
title: "–ö–µ–π—Å: –°—Ç—Ä–æ–π–∫–∞ (AntExpress)",
subtitle: "–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä —Ä–µ—à–µ–Ω–∏–π –∏–Ω—Ü–∏–¥–µ–Ω—Ç–æ–≤",
description: "–í–≤–µ–¥–∏—Ç–µ –ø—Ä–æ–±–ª–µ–º—É –Ω–∞ —Å—Ç—Ä–æ–π–∫–µ, –∏ –ò–ò —Ä–µ—à–∏—Ç –µ—ë.",
icon: "üèóÔ∏è"
},
{
id: 10,
type: "cta",
title: "–ë—É–¥—É—â–µ–µ –∑–¥–µ—Å—å",
subtitle: "–°–ø—Ä–æ—Å–∏—Ç–µ –í–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –û—Å–Ω–æ–≤–∞—Ç–µ–ª—è",
contacts: { name: "–°–µ—Ä–≥–µ–π –õ—É–∫—å—è–Ω–æ–≤", role: "CEO LukInterLab", action: "–ò—â–µ–º –ø–∞—Ä—Ç–Ω–µ—Ä–æ–≤" }
}
];

export default function App() {
const [current, setCurrent] = useState(0);
const [isLoading, setIsLoading] = useState(false);

// State for Slide 4 (Tech Demo)
const [techCommand, setTechCommand] = useState("–û–ø–ª–∞—Ç–∏ —Å—á–µ—Ç –∑–∞ –±–µ—Ç–æ–Ω 50–∫ —Å—Ä–æ—á–Ω–æ");
const [techLog, setTechLog] = useState(null);

// State for Slide 5 (Case Gen)
const [incidentInput, setIncidentInput] = useState("–†–∞–±–æ—á–∏–π —Ä–∞–∑–±–∏–ª –æ–∫–Ω–æ –Ω–∞ –æ–±—ä–µ–∫—Ç–µ");
const [incidentSolution, setIncidentSolution] = useState(null);

// State for Slide 10 (Virtual CEO)
const [investorQ, setInvestorQ] = useState("");
const [ceoAnswer, setCeoAnswer] = useState(null);

const nextSlide = () => setCurrent(prev => (prev + 1) % slides.length);
const prevSlide = () => setCurrent(prev => (prev - 1 + slides.length) % slides.length);

// Generic API Caller
const callAI = async (prompt) => {
setIsLoading(true);
try {
const resp = await
fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`,
{
method: 'POST',
headers: { 'Content-Type': 'application/json' },
body: JSON.stringify({ contents: [{ parts: [{ text: prompt }] }] })
});
const data = await resp.json();
return data.candidates[0].content.parts[0].text;
} catch (e) {
return "–û—à–∏–±–∫–∞ —Å–≤—è–∑–∏ —Å –ò–ò. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ.";
} finally {
setIsLoading(false);
}
};

// Handlers
const handleTechDemo = async (e) => {
e.preventDefault();
const res = await callAI(`–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π –±–∏–∑–Ω–µ—Å-–∫–æ–º–∞–Ω–¥—É: "${techCommand}". –í—ã–≤–µ–¥–∏ –æ—Ç–≤–µ—Ç —Å—Ç—Ä–æ–≥–æ –≤ —Ñ–æ—Ä–º–∞—Ç–µ:
Intent: [–¢–∏–ø –∑–∞–¥–∞—á–∏]
Agent: [–ö—Ç–æ –≤—ã–ø–æ–ª–Ω–∏—Ç]
Risk: [–£—Ä–æ–≤–µ–Ω—å —Ä–∏—Å–∫–∞]
Action: [–¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ]`);
setTechLog(res);
};

const handleIncident = async (e) => {
e.preventDefault();
const res = await callAI(`–¢—ã –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ LukInterLab. –ù–∞ —Å—Ç—Ä–æ–π–∫–µ –ø—Ä–æ–∏–∑–æ—à–µ–ª –∏–Ω—Ü–∏–¥–µ–Ω—Ç: "${incidentInput}".
–°–≥–µ–Ω–µ—Ä–∏—Ä—É–π 3 –∫–æ—Ä–æ—Ç–∫–∏—Ö —à–∞–≥–∞, –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–µ–¥–ø—Ä–∏–º–µ—Ç —Å–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ (–±–µ–∑ —É—á–∞—Å—Ç–∏—è —á–µ–ª–æ–≤–µ–∫–∞). –ò—Å–ø–æ–ª—å–∑—É–π —ç–º–æ–¥–∑–∏.`);
setIncidentSolution(res);
};

const handleCEO = async (e) => {
e.preventDefault();
const res = await callAI(`–¢—ã –°–µ—Ä–≥–µ–π –õ—É–∫—å—è–Ω–æ–≤, –∞–º–±–∏—Ü–∏–æ–∑–Ω—ã–π CEO IT-—Å—Ç–∞—Ä—Ç–∞–ø–∞. –ò–Ω–≤–µ—Å—Ç–æ—Ä —Å–ø—Ä–∞—à–∏–≤–∞–µ—Ç: "${investorQ}".
–û—Ç–≤–µ—Ç—å –∫–æ—Ä–æ—Ç–∫–æ, –¥–µ—Ä–∑–∫–æ, –ø—Ä–æ–¥–∞–≤–∞—è –≤–∏–∑–∏–æ–Ω–µ—Ä—Å—Ç–≤–æ –∏ –º–∞—Å—à—Ç–∞–±. –ú–∞–∫—Å–∏–º—É–º 2 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è.`);
setCeoAnswer(res);
};

const slide = slides[current];

return (
<div style={{ height: '100vh' , width: '100%' , backgroundColor: '#020617' , color: '#f8fafc' , display: 'flex' ,
    alignItems: 'center' , justifyContent: 'center' , fontFamily: 'sans-serif' , padding: '20px' }}>
    <div style={{ position: 'relative' , width: '100%' , maxWidth: '900px' , aspectRatio: '16/9' ,
        backgroundColor: '#0f172a' , border: '1px solid #1e293b' , borderRadius: '24px' , padding: '40px' ,
        display: 'flex' , flexDirection: 'column' , boxShadow: '0 25px 50px -12px rgba(0,0,0,0.5)' }}>

        {/* Header */}
        <div style={{ display: 'flex' , justifyContent: 'space-between' , borderBottom: '1px solid #1e293b' ,
            paddingBottom: '15px' , marginBottom: '20px' }}>
            <div style={{ color: '#3b82f6' , fontWeight: 'bold' , fontSize: '12px' , letterSpacing: '2px' }}>
                LUKINTERLAB // {current + 1}
            </div>
            <div style={{ color: '#64748b' , fontSize: '10px' }}>LIVE AI DEMO</div>
        </div>

        {/* Content Area */}
        <div style={{ flex: 1, display: 'flex' , flexDirection: 'column' , justifyContent: 'center' ,
            alignItems: 'center' , textAlign: 'center' , overflowY: 'auto' }}>

            {/* TITLE SLIDE */}
            {slide.type === 'title' && (
            <div className="animate-in fade-in zoom-in duration-500">
                <div style={{ fontSize: '60px' , marginBottom: '20px' }}>{slide.icon}</div>
                <h1 style={{ fontSize: '48px' , fontWeight: '900' , marginBottom: '10px' , letterSpacing: '-1px' }}>
                    {slide.title}</h1>
                <p style={{ fontSize: '20px' , color: '#60a5fa' , fontWeight: '300' }}>{slide.subtitle}</p>
                <div style={{ marginTop: '30px' , fontSize: '12px' , color: '#94a3b8' , border: '1px solid #334155' ,
                    padding: '8px 16px' , borderRadius: '20px' }}>
                    –ù–∞–∂–º–∏—Ç–µ —Å—Ç—Ä–µ–ª–∫—É –≤–ø—Ä–∞–≤–æ ‚Üí
                </div>
            </div>
            )}

            {/* PAIN & SOLUTION SLIDES */}
            {(slide.type === 'pain' || slide.type === 'solution') && (
            <div style={{ width: '100%' }}>
                <h2 style={{ fontSize: '32px' , marginBottom: '10px' }}>{slide.title}</h2>
                <p style={{ color: '#94a3b8' , marginBottom: '40px' }}>{slide.subtitle}</p>
                {slide.points ? (
                <div style={{ display: 'flex' , gap: '20px' }}>
                    {slide.points.map((p, i) => (
                    <div key={i} style={{ flex: 1, backgroundColor: '#1e293b' , padding: '20px' , borderRadius: '16px'
                        }}>
                        <div style={{ fontSize: '30px' , marginBottom: '10px' }}>{p.icon}</div>
                        <div style={{ fontWeight: 'bold' , marginBottom: '5px' }}>{p.title}</div>
                        <div style={{ fontSize: '12px' , color: '#94a3b8' }}>{p.desc}</div>
                    </div>
                    ))}
                </div>
                ) : (
                <div style={{ fontSize: '24px' , fontWeight: '300' , color: '#fff' }}>
                    {slide.content} <br />
                    <span style={{ color: '#3b82f6' , fontWeight: 'bold' }}>{slide.highlight}</span>
                </div>
                )}
            </div>
            )}

            {/* SLIDE 4: TECH PARSER */}
            {slide.type === 'tech' && (
            <div style={{ width: '100%' , textAlign: 'left' }}>
                <h2 style={{ fontSize: '28px' , marginBottom: '20px' , textAlign: 'center' }}>{slide.title} <span
                        style={{fontSize: '14px' , color:'#3b82f6'}}>// AI LIVE</span></h2>

                <div style={{ backgroundColor: '#020617' , padding: '20px' , borderRadius: '16px' ,
                    border: '1px solid #334155' , fontFamily: 'monospace' }}>
                    <div style={{ marginBottom: '10px' , color: '#64748b' , fontSize: '12px' }}>// –í–≤–µ–¥–∏—Ç–µ
                        –Ω–µ—Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—É—é –∑–∞–¥–∞—á—É:</div>
                    <form onSubmit={handleTechDemo} style={{ display: 'flex' , gap: '10px' }}>
                        <span style={{ color: '#22c55e' }}>$</span>
                        <input value={techCommand} onChange={e=> setTechCommand(e.target.value)}
                        style={{ backgroundColor: 'transparent', border: 'none', outline: 'none', color: '#f8fafc',
                        flex: 1, fontFamily: 'monospace' }}
                        />
                        <button type="submit" style={{ cursor: 'pointer' , background: '#3b82f6' , border: 'none' ,
                            color: '#fff' , padding: '2px 10px' , borderRadius: '4px' }}>RUN</button>
                    </form>

                    <div style={{ marginTop: '20px' , minHeight: '100px' , color: '#94a3b8' , fontSize: '13px' ,
                        whiteSpace: 'pre-wrap' }}>
                        {isLoading ? "–ê–Ω–∞–ª–∏–∑ –Ω–µ–π—Ä–æ—Å–µ—Ç—å—é..." : (techLog || "–û–∂–∏–¥–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã...")}
                    </div>
                </div>
            </div>
            )}

            {/* SLIDE 5: CONSTRUCTION CASE */}
            {slide.type === 'case' && (
            <div style={{ width: '100%' }}>
                <div style={{ fontSize: '40px' , marginBottom: '10px' }}>{slide.icon}</div>
                <h2 style={{ fontSize: '30px' , marginBottom: '5px' }}>{slide.title}</h2>
                <p style={{ color: '#64748b' , marginBottom: '30px' }}>{slide.subtitle}</p>

                <div style={{ display: 'flex' , gap: '20px' , alignItems: 'flex-start' }}>
                    <div style={{ flex: 1, backgroundColor: '#fff' , color: '#000' , padding: '20px' ,
                        borderRadius: '16px' , textAlign: 'left' }}>
                        <label style={{ fontSize: '12px' , fontWeight: 'bold' , color: '#64748b' }}>–ü–†–û–ë–õ–ï–ú–ê:</label>
                        <input value={incidentInput} onChange={e=> setIncidentInput(e.target.value)}
                        style={{ width: '100%', border: 'none', borderBottom: '2px solid #e2e8f0', padding: '10px 0',
                        fontSize: '16px', outline: 'none' }}
                        />
                        <button onClick={handleIncident} style={{ marginTop: '15px' , width: '100%' ,
                            backgroundColor: '#ef4444' , color: '#fff' , border: 'none' , padding: '10px' ,
                            borderRadius: '8px' , cursor: 'pointer' , fontWeight: 'bold' }}>
                            üö® –†–ï–®–ò–¢–¨ –ü–†–û–ë–õ–ï–ú–£
                        </button>
                    </div>
                    <div style={{ flex: 1, backgroundColor: '#1e293b' , padding: '20px' , borderRadius: '16px' ,
                        textAlign: 'left' , minHeight: '180px' }}>
                        <div style={{ fontSize: '12px' , fontWeight: 'bold' , color: '#3b82f6' , marginBottom: '10px'
                            }}>–î–ï–ô–°–¢–í–ò–Ø SISTEMA OS:</div>
                        <div style={{ fontSize: '14px' , lineHeight: '1.6' , color: '#e2e8f0' , whiteSpace: 'pre-wrap'
                            }}>
                            {isLoading ? "–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—Ä–æ—Ç–æ–∫–æ–ª–∞..." : (incidentSolution || "–û–∂–∏–¥–∞–Ω–∏–µ –∏–Ω—Ü–∏–¥–µ–Ω—Ç–∞...")}
                        </div>
                    </div>
                </div>
            </div>
            )}

            {/* SLIDE 10: CTA & VIRTUAL CEO */}
            {slide.type === 'cta' && (
            <div style={{ width: '100%' }}>
                <h2 style={{ fontSize: '40px' , marginBottom: '30px' , fontWeight: '900' }}>{slide.title}</h2>

                <div style={{ display: 'flex' , gap: '30px' , justifyContent: 'center' , alignItems: 'center' }}>
                    <div style={{ textAlign: 'left' }}>
                        <div style={{ fontSize: '24px' , fontWeight: 'bold' }}>{slide.contacts.name}</div>
                        <div style={{ color: '#3b82f6' }}>{slide.contacts.role}</div>
                        <div style={{ marginTop: '20px' , fontSize: '14px' , color: '#94a3b8' }}>{slide.contacts.action}
                        </div>
                    </div>

                    <div style={{ width: '1px' , height: '100px' , backgroundColor: '#334155' }}></div>

                    <div style={{ width: '350px' , backgroundColor: '#1e293b' , padding: '20px' , borderRadius: '16px' ,
                        textAlign: 'left' }}>
                        <div style={{ fontSize: '12px' , color: '#60a5fa' , marginBottom: '10px' }}>üí¨ –°–ü–†–û–°–ò –û–°–ù–û–í–ê–¢–ï–õ–Ø
                            (AI):</div>
                        <form onSubmit={handleCEO} style={{ display: 'flex' , gap: '10px' , marginBottom: '15px' }}>
                            <input value={investorQ} onChange={e=> setInvestorQ(e.target.value)}
                            placeholder="–ì–¥–µ –¥–µ–Ω—å–≥–∏?"
                            style={{ flex: 1, backgroundColor: '#0f172a', border: '1px solid #334155', color: '#fff',
                            padding: '8px', borderRadius: '6px', fontSize: '12px' }}
                            />
                            <button type="submit" style={{ cursor: 'pointer' , background: '#3b82f6' , border: 'none' ,
                                borderRadius: '6px' , padding: '0 10px' }}>‚Üµ</button>
                        </form>
                        <div style={{ fontSize: '13px' , fontStyle: 'italic' , color: '#e2e8f0' , minHeight: '40px' }}>
                            {isLoading ? "..." : (ceoAnswer ? `"${ceoAnswer}"` : "")}
                        </div>
                    </div>
                </div>
            </div>
            )}

        </div>

        {/* Footer Nav */}
        <div style={{ display: 'flex' , justifyContent: 'space-between' , marginTop: '30px' , color: '#64748b' ,
            fontSize: '11px' , fontWeight: 'bold' }}>
            <button onClick={prevSlide} style={{ background: 'none' , border: 'none' , color: '#64748b' ,
                cursor: 'pointer' }}>‚Üê –ù–ê–ó–ê–î</button>
            <div style={{ display: 'flex' , gap: '8px' }}>
                {slides.map((_, i) =>
                <div key={i} style={{ height: '4px' , width: '20px' , borderRadius: '2px' , backgroundColor: i===current
                    ? '#3b82f6' : '#1e293b' }} />)}
            </div>
            <button onClick={nextSlide} style={{ background: 'none' , border: 'none' , color: '#64748b' ,
                cursor: 'pointer' }}>–í–ü–ï–†–ï–î ‚Üí</button>
        </div>
    </div>
</div>
);
}